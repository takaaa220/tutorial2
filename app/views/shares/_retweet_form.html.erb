<div class="share">
  <% if micropost.retweet?(current_user) %>
    <%= form_for(micropost.shares.find_by(user_id: current_user.id),
                  html: { method: :delete }, remote: true) do |f| %>
      <%= button_tag(class: "retweet") do %>
        <%= content_tag :i, " #{micropost.shares.count}", class: "fas fa-retweet" %>
      <% end %>
    <% end %>
  <% else %>
    <%= form_for(micropost.shares.build, remote: true) do |f| %>
      <%= hidden_field_tag :micropost_id, micropost.id %>

      <%= button_tag(class: "no") do %>
        <%= content_tag :i, " #{micropost.shares.count}", class: "fas fa-retweet" %>
      <% end %>
    <% end %>
  <% end %>
</div>
